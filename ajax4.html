<!-- 首先讲的是input中的输入的内容在PHP获取，然后PHP返回这个内容，html通过ajax获得数据显示在HTML页面 -->
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>ajax4 --请求PHP接口</title>
</head>
<body>
	<button id="button">获取数据</button>
	<div id="process"></div>
	<h1>GET FORM</h1>
	<form action="process.php" method="get" id="getForm">
		<input type="text" name="name" id="name1">
		<input type="submit" value="Submit">
	</form>
	<!-- 这里用自己重写的submit方法，就不用写method了，后面自己定义 -->
	<h1>AJAX GET FORM</h1>
	<form action="process.php" method="get">
		<input type="text" name="name" id="name1">
		<input type="submit" value="Submit">
	</form>

	<h1>POST FORM</h1>
	<form action="process.php" method="post">
		<input type="text" name="name" id="name1">
		<input type="submit" value="Submit">
	</form>
	<h1>AJAX POST FORM</h1>
	<!-- 这里用自己重写的submit方法，就不用写method了，后面自己定义 -->
	<form id="postForm" method="post">
		<input type="text" name="name" id="name2">
		<input type="submit" value="Submit">
	</form>
	<script>
		document.getElementById('button').addEventListener("click",getData);
		//重写
		document.getElementById('getForm').addEventListener("submit",getData2);
		document.getElementById('postForm').addEventListener("submit",postData);
		//给button添加点击事件，一点击，把PHP中echo的和你输入的数据拼接完输出到本页面
		function getData() {
			var xhr = new XMLHttpRequest();
			xhr.open("get","process.php",true);
			xhr.onreadystatechange = function(){
				if(this.readyState == 4 && this.status == 200){
					console.log(this.responseText);


				}
			}
			xhr.send();
		}
		function getData2(e) {
			//取消默认事件
			e.preventDefault();
			var name = document.getElementById("name1").value;
			
			var xhr = new XMLHttpRequest();
			// xhr.open("get","process.php?name=Henry",true);
			xhr.open("get","process.php?name="+name,true);
			xhr.onreadystatechange = function(){
				if(this.readyState == 4 && this.status == 200){
					// console.log(this.responseText);
					document.getElementById("process").innerHTML = this.responseText;


				}
				// console.log(this.responseText);
			}
			
			xhr.send();
		}
		//重写
		function postData(e) {
			//取消默认事件
			e.preventDefault();
			var name = document.getElementById("name2").value;
			var params = "name="+name;
			var xhr = new XMLHttpRequest();
			xhr.open("post","process.php",true);
			//POST请求一定要设置请求头
			xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded"); 
			xhr.onreadystatechange = function(){
				if(this.readyState == 4 && this.status == 200){
					console.log(this.responseText);
					document.getElementById("process").innerHTML = this.responseText;


				}
				// console.log(this.responseText);
			}
			//POST方式？后东西在send里传，如果没有写null
			xhr.send(params);
		}





	</script>
</body>
</html>